<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Panel - Modern Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0f0f23;
      --bg-secondary: #1a1a2e;
      --bg-card: #16213e;
      --text-primary: #e4e4e7;
      --text-secondary: #a1a1aa;
      --accent-primary: #6366f1;
      --accent-secondary: #8b5cf6;
      --accent-success: #10b981;
      --accent-warning: #f59e0b;
      --accent-danger: #ef4444;
      --border: rgba(255,255,255,0.1);
      --shadow: 0 4px 20px rgba(0,0,0,0.4);
    }
    
    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      overflow: hidden;
      height: 100vh;
    }

    /* Animated Background */
    .bg-gradient {
      position: fixed;
      inset: 0;
      z-index: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 50%);
      animation: gradient-shift 15s ease infinite;
    }
    
    @keyframes gradient-shift {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    /* Sidebar */
    aside {
      position: fixed;
      left: 0;
      top: 0;
      height: 100vh;
      width: 280px;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border);
      padding: 24px;
      z-index: 100;
      transform: translateX(-100%);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    aside.show {
      transform: translateX(0);
    }
    
    .brand {
      font-size: 24px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 40px;
      letter-spacing: -0.5px;
    }
    
    nav button {
      width: 100%;
      padding: 14px 16px;
      margin-bottom: 8px;
      border: none;
      border-radius: 12px;
      background: transparent;
      color: var(--text-secondary);
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      text-align: left;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: all 0.2s ease;
    }
    
    nav button:hover {
      background: rgba(99, 102, 241, 0.1);
      color: var(--text-primary);
      transform: translateX(4px);
    }
    
    nav button.active {
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      color: white;
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
    }

    /* Main Content */
    main {
      margin-left: 0;
      padding: 24px;
      height: 100vh;
      overflow-y: auto;
      position: relative;
      z-index: 1;
      transition: margin-left 0.3s ease;
    }
    
    main::-webkit-scrollbar { width: 6px; }
    main::-webkit-scrollbar-thumb { 
      background: var(--accent-primary); 
      border-radius: 3px; 
    }

    /* Top Bar */
    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 32px;
      padding: 20px;
      background: var(--bg-card);
      border-radius: 16px;
      border: 1px solid var(--border);
    }
    
    .topbar-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .hamburger {
      background: none;
      border: none;
      color: var(--text-primary);
      font-size: 24px;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      transition: background 0.2s;
    }
    
    .hamburger:hover {
      background: rgba(255,255,255,0.1);
    }
    
    #pageTitle {
      font-size: 28px;
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    /* Stats Cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }
    
    .stat-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 24px;
      position: relative;
      overflow: hidden;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    }
    
    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
    }
    
    .stat-icon {
      font-size: 36px;
      margin-bottom: 12px;
      filter: drop-shadow(0 2px 8px rgba(99, 102, 241, 0.4));
    }
    
    .stat-value {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 4px;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .stat-label {
      font-size: 14px;
      color: var(--text-secondary);
      font-weight: 500;
    }

    /* Chart Card */
    .chart-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 28px;
      margin-bottom: 24px;
    }
    
    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }
    
    .chart-title {
      font-size: 20px;
      font-weight: 600;
    }
    
    .chart-controls {
      display: flex;
      gap: 12px;
    }
    
    .btn-icon {
      padding: 8px 16px;
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid var(--accent-primary);
      border-radius: 8px;
      color: var(--accent-primary);
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .btn-icon:hover {
      background: var(--accent-primary);
      color: white;
    }

    /* Quick Actions */
    .quick-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-top: 32px;
    }
    
    .action-btn {
      padding: 16px 20px;
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2));
      border: 1px solid var(--accent-primary);
      border-radius: 12px;
      color: var(--text-primary);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .action-btn:hover {
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4);
    }

    /* Pages */
    .page {
      display: none;
      animation: fadeIn 0.4s ease;
    }
    
    .page.active {
      display: block;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Card */
    .card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 28px;
      margin-bottom: 24px;
    }
    
    .card h3 {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 20px;
    }

    /* Form Elements */
    input, select {
      width: 100%;
      padding: 14px 16px;
      margin-bottom: 16px;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border);
      border-radius: 12px;
      color: var(--text-primary);
      font-size: 15px;
      transition: all 0.2s;
    }
    
    input:focus, select:focus {
      outline: none;
      border-color: var(--accent-primary);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }
    
    button[type="submit"], .btn-primary {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    button[type="submit"]:hover, .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4);
    }

    /* Table */
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    thead tr {
      border-bottom: 1px solid var(--border);
    }
    
    th, td {
      padding: 16px 12px;
      text-align: left;
    }
    
    th {
      font-weight: 600;
      font-size: 14px;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    tbody tr {
      border-bottom: 1px solid rgba(255,255,255,0.05);
      transition: background 0.2s;
    }
    
    tbody tr:hover {
      background: rgba(99, 102, 241, 0.05);
    }

    /* Spinner */
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(99, 102, 241, 0.2);
      border-top-color: var(--accent-primary);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 20px auto;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Responsive */
    @media (min-width: 1024px) {
      aside {
        transform: translateX(0);
      }
      main {
        margin-left: 280px;
      }
      .hamburger {
        display: none;
      }
    }

    /* Time Display */
    .time-display {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 12px 20px;
      background: rgba(99, 102, 241, 0.1);
      border-radius: 12px;
    }
    
    .time-icon {
      font-size: 20px;
    }
    
    .time-text {
      font-size: 16px;
      font-weight: 600;
      color: var(--accent-primary);
    }
  </style>
</head>
<body>

<div class="bg-gradient"></div>

<!-- Sidebar -->
<aside id="sidebar">
  <div class="brand">‚ö° Admin Panel</div>
  <nav>
    <button class="nav-btn active" data-page="dashboard">
      <span>üìä</span> Dashboard
    </button>
    <button class="nav-btn" data-page="server">
      <span>üñ•</span> Server
    </button>
    <button class="nav-btn" data-page="reseller">
      <span>üë•</span> Reseller
    </button>
    <button class="nav-btn" data-page="create">
      <span>‚ûï</span> Create User
    </button>
    <button class="nav-btn" data-page="createpanel">
      <span>üéÆ</span> Create Panel
    </button>
    <button class="nav-btn" data-page="createadmin">
      <span>üîê</span> Create Admin
    </button>
    <button class="nav-btn" data-page="clearserver">
      <span>üóë</span> Clear Server
    </button>
  </nav>
</aside>

<!-- Main Content -->
<main>
  <!-- Top Bar -->
  <div class="topbar">
    <div class="topbar-left">
      <button class="hamburger" onclick="toggleSidebar()">‚ò∞</button>
      <h1 id="pageTitle">Dashboard</h1>
    </div>
    <div class="time-display">
      <span class="time-icon">üïê</span>
      <span class="time-text" id="clock">--:--:--</span>
    </div>
  </div>

  <!-- Dashboard Page -->
  <div class="page active" id="dashboard">
    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">üë•</div>
        <div class="stat-value" id="totalUsers">-</div>
        <div class="stat-label">Total Users</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üñ•</div>
        <div class="stat-value" id="totalServers">-</div>
        <div class="stat-label">Total Servers</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üåê</div>
        <div class="stat-value" id="ip">-</div>
        <div class="stat-label">Your IP Address</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üîã</div>
        <div class="stat-value" id="battery">-</div>
        <div class="stat-label">Battery Status</div>
      </div>
    </div>

    <!-- Chart Card -->
    <div class="chart-card">
      <div class="chart-header">
        <h3 class="chart-title">üìà User & Server Analytics</h3>
        <div class="chart-controls">
          <button id="btnPlayServer" class="btn-icon">‚ñ∂ Animate</button>
          <input id="barColorServer" type="color" value="#6366f1" style="width: 40px; height: 40px; cursor: pointer; border-radius: 8px;">
        </div>
      </div>
      
      <svg id="barChartServer" viewBox="0 0 800 360" preserveAspectRatio="xMidYMid meet"
           style="width:100%;max-height:360px;">
        <defs>
          <linearGradient id="barGradServer" x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stop-color="#6366f1" stop-opacity=".95"/>
            <stop offset="100%" stop-color="#8b5cf6" stop-opacity=".85"/>
          </linearGradient>
        </defs>
        <g id="barGroupServer" transform="translate(60,20)"></g>
      </svg>
      
      <div style="display:flex;justify-content:center;gap:40px;margin-top:20px;font-size:15px;">
        <span>Users: <b id="txtUserServer" style="color: var(--accent-primary);">0</b></span>
        <span>Servers: <b id="txtServerServer" style="color: var(--accent-secondary);">0</b></span>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <button class="action-btn" onclick="gotoPage('createpanel')">
        <span>üéÆ</span> Create Panel
      </button>
      <button class="action-btn" onclick="gotoPage('server')">
        <span>üñ•</span> View Servers
      </button>
      <button class="action-btn" onclick="gotoPage('reseller')">
        <span>üë•</span> Manage Resellers
      </button>
      <button class="action-btn" onclick="gotoPage('create')">
        <span>‚ûï</span> Add User
      </button>
    </div>
  </div>

  <!-- Other Pages (simplified for demo) -->
  <div class="page" id="server">
    <div class="card">
      <h3>üñ• Server Management</h3>
      <p style="color: var(--text-secondary);">Server list will be displayed here...</p>
    </div>
  </div>

  <div class="page" id="reseller">
    <div class="card">
      <h3>üë• Reseller Management</h3>
      <p style="color: var(--text-secondary);">Reseller list will be displayed here...</p>
    </div>
  </div>

  <div class="page" id="create">
    <div class="card" style="max-width: 500px; margin: 0 auto;">
      <h3>‚ûï Create New User</h3>
      <input type="text" placeholder="Username">
      <input type="password" placeholder="Password">
      <button type="submit" class="btn-primary">Create User</button>
    </div>
  </div>

  <div class="page" id="createpanel">
    <div class="card" style="max-width: 500px; margin: 0 auto;">
      <h3>üéÆ Create Panel</h3>
      <p style="color: var(--text-secondary); margin-bottom: 20px;">Panel creation form...</p>
    </div>
  </div>

  <div class="page" id="createadmin">
    <div class="card" style="max-width: 500px; margin: 0 auto;">
      <h3>üîê Create Admin</h3>
      <p style="color: var(--text-secondary); margin-bottom: 20px;">Admin creation form...</p>
    </div>
  </div>

  <div class="page" id="clearserver">
    <div class="card" style="max-width: 500px; margin: 0 auto;">
      <h3>üóë Clear Server</h3>
      <p style="color: var(--text-secondary); margin-bottom: 20px;">Clear server options...</p>
    </div>
  </div>
</main>

<script>
// Navigation
const buttons = document.querySelectorAll('.nav-btn');
const pages = document.querySelectorAll('.page');
const pageTitle = document.getElementById('pageTitle');
const sidebar = document.getElementById('sidebar');

buttons.forEach(btn => {
  btn.addEventListener('click', () => {
    const target = btn.getAttribute('data-page');
    buttons.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    pages.forEach(p => p.classList.remove('active'));
    document.getElementById(target).classList.add('active');
    pageTitle.textContent = btn.textContent.trim().split(' ').slice(1).join(' ');
    if (window.innerWidth < 1024) {
      sidebar.classList.remove('show');
    }
  });
});

function toggleSidebar() {
  sidebar.classList.toggle('show');
}

function gotoPage(pageId) {
  document.querySelector(`[data-page="${pageId}"]`).click();
}

// Clock
function updateClock() {
  const now = new Date();
  document.getElementById('clock').textContent = now.toLocaleTimeString('id-ID');
}
setInterval(updateClock, 1000);
updateClock();

// Stats
let userCount = 42;
let serverCount = 28;

document.getElementById('totalUsers').textContent = userCount;
document.getElementById('totalServers').textContent = serverCount;

// IP
fetch('https://api.ipify.org?format=json')
  .then(res => res.json())
  .then(data => document.getElementById('ip').textContent = data.ip)
  .catch(() => document.getElementById('ip').textContent = 'N/A');

// Battery
if ('getBattery' in navigator) {
  navigator.getBattery().then(battery => {
    function updateBattery() {
      const level = Math.round(battery.level * 100);
      document.getElementById('battery').textContent = `${level}%`;
    }
    updateBattery();
    battery.addEventListener('levelchange', updateBattery);
  });
} else {
  document.getElementById('battery').textContent = 'N/A';
}

// Chart
const barGroup = document.getElementById('barGroupServer');
const btnPlay = document.getElementById('btnPlayServer');
const barColor = document.getElementById('barColorServer');
const txtUser = document.getElementById('txtUserServer');
const txtServer = document.getElementById('txtServerServer');

const maxH = 280;

function renderBar() {
  barGroup.innerHTML = '';
  const max = Math.max(userCount, serverCount, 1);
  const wBar = 80, gap = 100;
  const xUser = 100, xServ = xUser + wBar + gap;

  // User Bar
  const uRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
  uRect.setAttribute('x', xUser);
  uRect.setAttribute('y', maxH);
  uRect.setAttribute('width', wBar);
  uRect.setAttribute('height', 0);
  uRect.setAttribute('fill', 'url(#barGradServer)');
  uRect.setAttribute('rx', 8);
  uRect.setAttribute('data-target-h', (userCount / max) * maxH);
  barGroup.appendChild(uRect);

  // Server Bar
  const sRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
  sRect.setAttribute('x', xServ);
  sRect.setAttribute('y', maxH);
  sRect.setAttribute('width', wBar);
  sRect.setAttribute('height', 0);
  sRect.setAttribute('fill', 'url(#barGradServer)');
  sRect.setAttribute('rx', 8);
  sRect.setAttribute('data-target-h', (serverCount / max) * maxH);
  barGroup.appendChild(sRect);

  // Labels
  ['Users', 'Servers'].forEach((lab, i) => {
    const t = document.createElementNS('http://www.w3.org/2000/svg', 'text');
    t.setAttribute('x', i === 0 ? xUser + wBar / 2 : xServ + wBar / 2);
    t.setAttribute('y', maxH + 25);
    t.setAttribute('text-anchor', 'middle');
    t.setAttribute('font-size', '14');
    t.setAttribute('fill', 'rgba(255,255,255,.6)');
    t.setAttribute('font-weight', '600');
    t.textContent = lab;
    barGroup.appendChild(t);
  });
}

function animateBar() {
  const rects = barGroup.querySelectorAll('rect');
  rects.forEach((r, idx) => {
    const targetH = parseFloat(r.getAttribute('data-target-h'));
    const start = performance.now() + idx * 150;
    const dur = 1000;
    
    function frame(t) {
      const el = t - start;
      if (el < 0) {
        requestAnimationFrame(frame);
        return;
      }
      const p = Math.min(1, el / dur);
      const ease = 1 - Math.pow(1 - p, 3);
      const h = ease * targetH;
      const y = maxH - h;
      r.setAttribute('height', h);
      r.setAttribute('y', y);
      if (p < 1) requestAnimationFrame(frame);
    }
    requestAnimationFrame(frame);
  });
}

barColor.addEventListener('input', () => {
  const c1 = barColor.value;
  document.querySelector('#barGradServer stop:nth-child(1)').setAttribute('stop-color', c1);
});

btnPlay.addEventListener('click', animateBar);

txtUser.textContent = userCount;
txtServer.textContent = serverCount;

// Initial render
setTimeout(() => {
  renderBar();
  setTimeout(animateBar, 300);
}, 500);
</script>
</body>
</html>
